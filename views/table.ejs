<!-- <style>
    .table-sortable th {
        cursor: pointer;
    }

    .table-sortable .th-sort-asc::after {
        content: "\25b4";
    }

    .table-sortable .th-sort-desc::after {
        content: "\25be";
    }

    .table-sortable .th-sort-asc::after,
    .table-sortable .th-sort-desc::after {
        margin-left: 5px;
    }

    .table-sortable .th-sort-asc,
    .table-sortable .th-sort-desc {
        background: rgba(0, 0, 0, 0.1);
    }

</style> -->
<h1>Table</h1>
   
<div class="container" >
    <nav class="navbar navbar-light bg-light" >
        <!-- <form class="form-inline"> -->
        <input class="form-control mr-sm-2" id="myInput" type="search"  placeholder="Search by <%= csvHeader[0] %>" onkeyup="myFunction()" aria-label="Search"  style="display: inline;">
        <!-- <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button> -->
        <!-- </form> -->
    </nav>
</div>
<table class="table table-sortable" id="myTable">
    
    <tr>
        <% for (var i =0 ; i < csvHeader.length;  i++ ) { %>
            <th> <%= csvHeader[i] %> </th>
        <% } %>
    </tr>

    <tbody>
        <% for (var i =0 ; i < csvData.length;  i++ ) { %>
            <tr>
                <% for (var j = 0 ; j < csvData[i].length;  j++ ) { %>
                    <td> <%= csvData[i][j] %> </td>
                <% } %>
                
            </tr>
        <% } %>
    </tbody>
</table>
<!-- <p><button onclick="sortTable()">Sort</button></p> -->
<script>

function myFunction() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}






// for sorting table
    let isDec = true ;

    th = document.getElementsByTagName('th');

    for(let c=0; c < th.length; c++){
        th[c].addEventListener('click',item(c))
    }

    function item(c){
        return function(){
            console.log(c);
            if(isDec == true)
                sortTable(c)
            else
                sortTable1(c)
        }
    }

    function sortTable(c) {

        var table, rows, switching, i, x, y, shouldSwitch;
        table = document.getElementById("myTable");
        switching = true;

        /* bubble sort Make a loop that will continue until no switching has been done:*/
        while (switching) {
        
            //start by saying: no switching is done:
            switching = false;
            rows = table.rows;
        
            /*Loop through all table rows (except the first, which contains table headers):*/
            for (i = 1; i < (rows.length - 1); i++) {

                //start by saying there should be no switching:
                shouldSwitch = false;

                /*Get the two elements you want to compare, one from current row and one from the next:*/
                x = rows[i].getElementsByTagName("TD")[c];
                y = rows[i + 1].getElementsByTagName("TD")[c];
                
                //check if the two rows should switch place:
                if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                    
                    //if so, mark as a switch and break the loop:
                    shouldSwitch = true;
                    break;
                }
            }
            if (shouldSwitch) {

                /*If a switch has been marked, make the switch and mark that a switch has been done:*/
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
            }
        }
    isDec = false ;
    }
    
    function sortTable1(c) {

        var table, rows, switching, i, x, y, shouldSwitch;
        table = document.getElementById("myTable");
        switching = true;

        /* bubble sort Make a loop that will continue until no switching has been done:*/
        while (switching) {

            //start by saying: no switching is done:
            switching = false;
            rows = table.rows;

            /*Loop through all table rows (except the first, which contains table headers):*/
            for (i = 1; i < (rows.length - 1); i++) {

                //start by saying there should be no switching:
                shouldSwitch = false;

                /*Get the two elements you want to compare, one from current row and one from the next:*/
                x = rows[i].getElementsByTagName("TD")[c];
                y = rows[i + 1].getElementsByTagName("TD")[c];
                
                //check if the two rows should switch place:
                if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                    
                    //if so, mark as a switch and break the loop:
                    shouldSwitch = true;
                    break;
                }
            }
            if (shouldSwitch) {

                /*If a switch has been marked, make the switch and mark that a switch has been done:*/
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
            }
        }
        isDec = true ;
    }
</script>